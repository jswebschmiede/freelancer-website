---
import { Icon } from 'astro-icon/components';

interface Props {
	icon: string;
	title: string;
	text: string;
	isMail?: boolean;
	isPhone?: boolean;
}

const { icon, title, text, isMail = false, isPhone = false } = Astro.props;

// E-Mail-Verschleierung mit Base64 fÃ¼r bessere Sicherheit
const encodeEmail = (email: string) => btoa(email);
const encodedEmail = isMail ? encodeEmail(text) : '';
---

<li class="group mb-8">
	<div class="flex items-center">
		<div
			class="after:top-1/2 after:left-full after:absolute relative flex justify-center items-center bg-base-100/60 after:bg-white/5 shadow-xl group-hover:shadow-none after:mt-[-1px] border-2 border-white/5 rounded-full w-[3.9375rem] after:w-10 h-[3.9375rem] after:h-[2px] aspect-1 font-heading text-[34px] text-center transition-shadow duration-300"
		>
			<Icon class="w-6 h-6" name={icon} />
		</div>

		<div class="pl-16">
			<h4 class="font-semibold text-2xl">{title}</h4>

			<div class="text-gray-500 text-sm">
				{
					isMail && (
						<span
							data-obfuscate-email
							data-email-b64={encodedEmail}
							class="hover:text-white transition-colors cursor-pointer"
						/>
					)
				}

				{isPhone && <a href={`tel:+49${text.replace(/^0+|-/g, '')}`}>{text}</a>}

				{!isMail && !isPhone && <span>{text}</span>}
			</div>
		</div>
	</div>
</li>
